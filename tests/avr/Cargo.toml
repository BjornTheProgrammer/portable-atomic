[package]
name = "avr-test"
version = "0.0.0"
edition = "2021"
publish = false

[workspace]
resolver = "2"

[features]
float = ["portable-atomic/float"]

[dependencies]
portable-atomic = { path = "../.." }
test-helper = { path = "../helper" }

avr-device = "0.5"
paste = "1"
ufmt = "0.2"

[target.avr-unknown-gnu-atmega2560.dependencies]
# When updating the revision, the reminder to update rust-toolchain.toml to use
# the same toolchain as https://github.com/Rahix/avr-hal/blob/HEAD/rust-toolchain.toml.
arduino-hal = { git = "https://github.com/rahix/avr-hal.git", rev = "4c9c44c314eb061ee20556ef10d45dea36e75ee4", features = ["arduino-mega2560"] }

[profile.dev]
lto = true
opt-level = "s"

[profile.release]
lto = true
opt-level = "s"
